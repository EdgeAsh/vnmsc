<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise</title>
</head>
<body>
<h1>promise</h1>
<script>
  let islogin = function () {
    return new Promise(function (resolve, reject) {
      let flag = document.cookie.indexOf('userId')>-1?true:false;

      if(flag=true){
        resolve({
          status:0,
          result:true
        })
      }else{
        reject('error')
      }
    })
  };

  let getUserInfo = ()=>{
    return new Promise((resolve,reject)=>{
      let userInfo = {
        userId:101
      }
        resolve(userInfo);
      });
  }

  islogin().then((res)=>{
    if(res.status==0){
      console.log('陈宫');
      return getUserInfo();
    }
  }).catch((err)=>{
    console.log(`err:${err}`)
  }).then((res2)=>{console.log(`userId:${res2.userId}`)});


  Promise.all([islogin(),getUserInfo()]).then(([res1,res2])=>{
    console.log(`result1:${res1.result},result2:${res2.userId}`);
  })
</script>
</body>
</html>
